---
title: Advanced DNS do servidor de borda planejando Skype para Business Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
ms.audience: ITPro
manager: serdars
ms.topic: conceptual
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection:
- IT_Skype16
- Strat_SB_Hybrid
ms.custom: ''
ms.assetid: f3a5895f-f64f-44eb-9a5e-8d606ac1fc38
description: 'Resumo: Revise os cenários de Skype para opções de implantação de servidor de negócios. Se você deseja que um único servidor ou preferir um pool de servidores com o DNS ou HLB, este tópico deve ajudar.'
ms.openlocfilehash: 75dc496d53823a87bfb3485d37a3c5f32ababe19
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/11/2019
ms.locfileid: "33925352"
---
# <a name="advanced-edge-server-dns-planning-for-skype-for-business-server"></a><span data-ttu-id="34967-104">Advanced DNS do servidor de borda planejando Skype para Business Server</span><span class="sxs-lookup"><span data-stu-id="34967-104">Advanced Edge Server DNS planning for Skype for Business Server</span></span>
 
<span data-ttu-id="34967-105">**Resumo:** Revise os cenários de Skype para opções de implantação de servidor de negócios.</span><span class="sxs-lookup"><span data-stu-id="34967-105">**Summary:** Review scenarios for Skype for Business Server deployment options.</span></span> <span data-ttu-id="34967-106">Se você deseja que um único servidor ou preferir um pool de servidores com o DNS ou HLB, este tópico deve ajudar.</span><span class="sxs-lookup"><span data-stu-id="34967-106">Whether you want a single server or prefer a server pool with DNS or HLB, this topic should help.</span></span>
  
<span data-ttu-id="34967-107">Quando se trata de sistema de nome de domínio (DNS) planejando Skype para Business Server, existem muitos fatores que podem ser reproduzidos em sua decisão.</span><span class="sxs-lookup"><span data-stu-id="34967-107">When it comes to Domain Name System (DNS) planning for Skype for Business Server, there are a lot of factors that may play into your decision.</span></span> <span data-ttu-id="34967-108">Se a estrutura de domínio de sua organização já estiver em vigor, pode ser só uma questão de analisar como continuar.</span><span class="sxs-lookup"><span data-stu-id="34967-108">If your organization's domain structure's already in place, this may be a matter of reviewing how you're going to proceed.</span></span> <span data-ttu-id="34967-109">Começaremos com os tópicos abaixo:</span><span class="sxs-lookup"><span data-stu-id="34967-109">We'll begin with the topics found below:</span></span>
  
- [<span data-ttu-id="34967-110">Walkthrough of Skype for Business clients locating services</span><span class="sxs-lookup"><span data-stu-id="34967-110">Walkthrough of Skype for Business clients locating services</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#WalkthroughOfSkype)
    
- [<span data-ttu-id="34967-111">Split-brain DNS</span><span class="sxs-lookup"><span data-stu-id="34967-111">Split-brain DNS</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#SplitBrainDNS)
    
- [<span data-ttu-id="34967-112">Automatic configuration without split-brain DNS</span><span class="sxs-lookup"><span data-stu-id="34967-112">Automatic configuration without split-brain DNS</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#NoSplitBrainDNS)
    
- [<span data-ttu-id="34967-113">DNS disaster recovery</span><span class="sxs-lookup"><span data-stu-id="34967-113">DNS disaster recovery</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#DNSDR)
    
- [<span data-ttu-id="34967-114">DNS load balancing</span><span class="sxs-lookup"><span data-stu-id="34967-114">DNS load balancing</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#DNSLB)
    
## <a name="walkthrough-of-skype-for-business-clients-locating-services"></a><span data-ttu-id="34967-115">Walkthrough of Skype for Business clients locating services</span><span class="sxs-lookup"><span data-stu-id="34967-115">Walkthrough of Skype for Business clients locating services</span></span>
<span data-ttu-id="34967-116"><a name="WalkthroughOfSkype"> </a></span><span class="sxs-lookup"><span data-stu-id="34967-116"></span></span>

<span data-ttu-id="34967-117">Skype para clientes corporativos são semelhantes às versões anteriores dos clientes do Lync em como eles encontrar e acessar os serviços Skype para Business Server.</span><span class="sxs-lookup"><span data-stu-id="34967-117">Skype for Business clients are similar to previous versions of Lync clients in how they find and access services in Skype for Business Server.</span></span> <span data-ttu-id="34967-118">Esta seção detalha o processo de local do servidor.</span><span class="sxs-lookup"><span data-stu-id="34967-118">This section details the server location process.</span></span>
  
1. <span data-ttu-id="34967-119">lyncdiscoverinternal. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="34967-119">lyncdiscoverinternal.\<domain\></span></span>
    
     <span data-ttu-id="34967-120">*Um registro de host do serviço de Descoberta Automática nos serviços Web internos.*</span><span class="sxs-lookup"><span data-stu-id="34967-120">*This is an A host record for the Autodiscover service on the internal web services.*</span></span> 
    
2. <span data-ttu-id="34967-121">lyncdiscover. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="34967-121">lyncdiscover.\<domain\></span></span>
    
     <span data-ttu-id="34967-122">*Um registro de host do serviço de Descoberta Automática nos serviços Web externos.*</span><span class="sxs-lookup"><span data-stu-id="34967-122">*This is an A host record for the Autodiscover service on the external web services.*</span></span> 
    
3. <span data-ttu-id="34967-123">sipinternaltls. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="34967-123">_sipinternaltls._tcp.\<domain\></span></span>
    
     <span data-ttu-id="34967-124">*Um registro SRV para conexões TLS internas.*</span><span class="sxs-lookup"><span data-stu-id="34967-124">*This is a SRV record for internal TLS connections.*</span></span> 
    
4. <span data-ttu-id="34967-125">_sip._tls. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="34967-125">_sip._tls.\<domain\></span></span>
    
     <span data-ttu-id="34967-126">*Um registro SRV para conexões TLS externas.*</span><span class="sxs-lookup"><span data-stu-id="34967-126">*This is a SRV record for external TLS connections.*</span></span> 
    
5. <span data-ttu-id="34967-127">sipinternal. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="34967-127">sipinternal.\<domain\></span></span>
    
     <span data-ttu-id="34967-128">*Esse é um registro host para o pool de Front-End ou diretor, pode ser resolvido apenas na rede interna.*</span><span class="sxs-lookup"><span data-stu-id="34967-128">*This is an A host record for the Front End pool or Director, resolvable only on the internal network.*</span></span> 
    
6. <span data-ttu-id="34967-129">SIP. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="34967-129">sip.\<domain\></span></span>
    
     <span data-ttu-id="34967-130">*Esse é um registro host para o pool de Front-End ou diretor, pode ser resolvido apenas na rede interna.*</span><span class="sxs-lookup"><span data-stu-id="34967-130">*This is an A host record for the Front End pool or Director, resolvable only on the internal network.*</span></span> 
    
7. <span data-ttu-id="34967-131">sipexternal. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="34967-131">sipexternal.\<domain\></span></span>
    
     <span data-ttu-id="34967-132">*Este é um registro host para o serviço de borda de acesso, quando o cliente está externo.*</span><span class="sxs-lookup"><span data-stu-id="34967-132">*This is an A host record for the Access Edge service, when the client is external.*</span></span> 
    
<span data-ttu-id="34967-133">O serviço de Descoberta Automática é sempre considerado o método preferencial para local do serviço, e os outros estão métodos de fallback.</span><span class="sxs-lookup"><span data-stu-id="34967-133">The Autodiscover service is always favored as that's the preferred method for service location, and the others are fallback methods.</span></span>
  
> [!NOTE]
> <span data-ttu-id="34967-p105">Ao criar registros SRV, é importante lembrar que eles devem apontar para um DNS A (e AAAA, se você estiver usando endereçamento IPv6) no mesmo domínio em que o registro SRV do DNS for criado. Por exemplo, se o registro SRV estiver em contoso.com, o registro A (e AAAA) para o qual aponta não poderá estar em fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="34967-p105">When you're creating SRV records, it's important to remember that they need to point to a DNS A (and AAAA if you're using IPv6 addressing) in the same domain in which the DNS SRV record's being created. For example, if they SRV record's in contoso.com, the A (and AAAA) record it points to can't be in fabrikam.com.</span></span> 
  
<span data-ttu-id="34967-p106">Se você quiser, é possível definir seu dispositivo móvel para descoberta manual de serviços. Se for isso que você desejar fazer, cada usuário precisa definir as configurações de seus dispositivos móveis com os URIs completos, internos e externos, do serviço de Descoberta Automática, incluindo o protocolo e o caminho, da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="34967-p106">If you're inclined to do it, you can set your mobile device up for manual discovery of services. If that's what you're looking to do, each user needs to configure their mobile device settings with the full internal and external Autodiscover service URIs, including the protocol and path, as follows:</span></span>
  
- <span data-ttu-id="34967-138">Para acesso externo: https://\<ExtPoolFQDN\>/Autodiscover/autodiscoverservice.svc/Root</span><span class="sxs-lookup"><span data-stu-id="34967-138">For external access: https://\<ExtPoolFQDN\>/Autodiscover/autodiscoverservice.svc/Root</span></span>
    
- <span data-ttu-id="34967-139">Para acesso interno: https://\<IntPoolFQDN\>/AutoDiscover/AutoDiscover.svc/Root</span><span class="sxs-lookup"><span data-stu-id="34967-139">For internal access: https://\<IntPoolFQDN\>/AutoDiscover/AutoDiscover.svc/Root</span></span>
    
<span data-ttu-id="34967-p107">Recomendamos que você use a descoberta automática em oposição à descoberta manual. Mas, se você estiver solucionando problemas ou fazendo testes, as configurações manuais podem ser muito úteis.</span><span class="sxs-lookup"><span data-stu-id="34967-p107">We do recommend you use automatic discovery as opposed to manual discovery. But if you're doing some troubleshooting or testing, manual settings can be very helpful.</span></span>
  
## <a name="split-brain-dns"></a><span data-ttu-id="34967-142">DNS de dupla personalidade</span><span class="sxs-lookup"><span data-stu-id="34967-142">Split-brain DNS</span></span>
<span data-ttu-id="34967-143"><a name="SplitBrainDNS"> </a></span><span class="sxs-lookup"><span data-stu-id="34967-143"></span></span>

<span data-ttu-id="34967-p108">Esta é uma configuração de DNS na qual você tem duas zonas DNS com o mesmo namespace. A primeira zona DNS lida com os pedidos internos, enquanto a segunda zona DNS lida com os pedidos externos.</span><span class="sxs-lookup"><span data-stu-id="34967-p108">This is a DNS configuration where you have two DNS zones with the same namespace. The first DNS zone handles internal requests, while the second DNS zone handles external requests.</span></span>
  
<span data-ttu-id="34967-p109">Por que uma empresa faria isso? Pode haver a necessidade de usar o mesmo namespace internamente e externamente, mas isso levaria a muitos SRV e registros A de DNS exclusivos para uma ou outra zona e, onde houver duplicação, os endereços IP associados a esses registros seriam exclusivo.</span><span class="sxs-lookup"><span data-stu-id="34967-p109">Why would a company do this? They may have a requirement to use the same namespace internally and externally, but of course this will lead to many DNS SRV and A records being unique to one zone or another, and where there is duplication, the IP addresses associated with these records would be unique.</span></span>
  
<span data-ttu-id="34967-148">Isso apresenta alguns desafios.</span><span class="sxs-lookup"><span data-stu-id="34967-148">This presents some challenges.</span></span> <span data-ttu-id="34967-149">O mais importante é que Split-Brain DNS **não tem suporte** para mobilidade.</span><span class="sxs-lookup"><span data-stu-id="34967-149">The most important is that split-brain DNS is **not supported** for Mobility.</span></span> <span data-ttu-id="34967-150">Isso ocorre por causa dos registros de DNS LyncDiscover e LyncDiscoverInternal (LyncDiscover deve ser definido no servidor DNS externo, enquanto que LyncDiscoverInternal deve ser definido em seu servidor DNS interno).</span><span class="sxs-lookup"><span data-stu-id="34967-150">This is because of the LyncDiscover and LyncDiscoverInternal DNS records (LyncDiscover has to be defined on you external DNS server, while LyncDiscoverInternal has to be defined on your internal DNS server).</span></span>
  
<span data-ttu-id="34967-151">Vai listamos os registros DNS para as zonas internos e externos aqui, mas você pode encontrar exemplos detalhados na seção de requisitos de ambiente de servidor de borda.</span><span class="sxs-lookup"><span data-stu-id="34967-151">We'll list the DNS records for the internal and external zones here, but you can find detailed examples on the Edge Server environmental requirements section.</span></span>
  
### <a name="internal-dns"></a><span data-ttu-id="34967-152">DNS Interno</span><span class="sxs-lookup"><span data-stu-id="34967-152">Internal DNS</span></span>

- <span data-ttu-id="34967-153">Contém uma zona DNS chamada (por exemplo) contoso.com, para a qual é autoritativo.</span><span class="sxs-lookup"><span data-stu-id="34967-153">Contains a DNS zone called (for example) contoso.com, for which it's authoritative.</span></span>
    
- <span data-ttu-id="34967-154">Essa zona interna contoso.com contém:</span><span class="sxs-lookup"><span data-stu-id="34967-154">This internal contoso.com contains:</span></span>
    
  - <span data-ttu-id="34967-155">Os registros DNS A e AAAA (se você estiver usando endereçamento IPv6) para seu pool de Front-End, o pool de diretor ou nome do pool de diretor e todos os servidores internos executando Skype para Business Server na rede da sua organização.</span><span class="sxs-lookup"><span data-stu-id="34967-155">DNS A and AAAA (if you're using IPv6 addressing) records for your Front End pool, Director pool or Director pool name, and all internal servers running Skype for Business Server in your organization's network.</span></span>
    
  - <span data-ttu-id="34967-156">DNS A e AAAA (se você estiver usando endereçamento IPv6) registra sua interface interna de borda para cada Skype para o servidor de borda do Business Server na rede de perímetro.</span><span class="sxs-lookup"><span data-stu-id="34967-156">DNS A and AAAA (if you're using IPv6 addressing) records for your Edge internal interface for each Skype for Business Server Edge Server in your perimeter network.</span></span>
    
  - <span data-ttu-id="34967-157">Os registros DNS A e AAAA (se você estiver usando endereçamento IPv6) para a interface interna de cada servidor de proxy reverso na rede de perímetro (que é **opcional** para gerenciamento de um proxy reverso).</span><span class="sxs-lookup"><span data-stu-id="34967-157">DNS A and AAAA (if you're using IPv6 addressing) records for the internal interface of each reverse proxy server in your perimeter network (which is **optional** for management of a reverse proxy).</span></span>
    
  - <span data-ttu-id="34967-158">Registros DNS A e AAAA (se você estiver usando endereçamento IPv6) e SRV para Skype interno para configuração automática do cliente Business Server (que é **opcional** ).</span><span class="sxs-lookup"><span data-stu-id="34967-158">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for internal Skype for Business Server client autoconfiguration (which is **optional** ).</span></span>
    
  - <span data-ttu-id="34967-159">DNS A e AAAA (se você estiver usando endereçamento IPv6) ou CNAME para descoberta automática do Skype para Business Server Web Services (que é **opcional** ).</span><span class="sxs-lookup"><span data-stu-id="34967-159">DNS A and AAAA (if you're using IPv6 addressing) or CNAME records for automatic discovery of Skype for Business Server Web Services (which is **optional** ).</span></span>
    
- <span data-ttu-id="34967-160">Todos os seu Skype para interfaces de borda internas Business Server na rede de perímetro use esta zona DNS interna para resolver consultas em contoso.com.</span><span class="sxs-lookup"><span data-stu-id="34967-160">All your Skype for Business Server internal Edge interfaces in your perimeter network use this internal DNS zone for resolving queries to contoso.com.</span></span>
    
- <span data-ttu-id="34967-161">Todos os servidores que executam o Skype para servir de negócios e clientes executando o Skype para Business Server na rede corporativa, apontem para servidores DNS internos para resolver consultas em contoso.com ou uso do arquivo de Host em cada servidor de borda e a lista A e AAAA (se você estiver usando o Registros de endereçamento IPv6) para o servidor de próximo salto (especificamente para o Diretor ou VIP do pool de diretor, Front End pool VIP ou servidor Standard Edition).</span><span class="sxs-lookup"><span data-stu-id="34967-161">All servers running Skype for Business Serve, and clients running Skype for Business Server in the corporate network, point to internal DNS servers for resolving queries to contoso.com, or they use the Host file on each Edge Server and list A and AAAA (if you're using IPv6 addressing) records for the next hop server (specifically for the Director or Director pool VIP, Front End pool VIP, or Standard Edition server).</span></span>
    
### <a name="external-dns"></a><span data-ttu-id="34967-162">DNS Externo</span><span class="sxs-lookup"><span data-stu-id="34967-162">External DNS</span></span>

- <span data-ttu-id="34967-163">Contém uma zona DNS chamada (por exemplo) contoso.com, para a qual é autoritativo</span><span class="sxs-lookup"><span data-stu-id="34967-163">Contains a DNS zone called (for example) contoso.com, for which it's authoritative.</span></span>
    
- <span data-ttu-id="34967-164">Essa zona externa contoso.com contém:</span><span class="sxs-lookup"><span data-stu-id="34967-164">This external contoso.com contains:</span></span>
    
  - <span data-ttu-id="34967-165">DNS A e AAAA (se você estiver usando endereçamento IPv6) ou CNAME registra, para a descoberta automática do Skype para serviços da web de Business Server.</span><span class="sxs-lookup"><span data-stu-id="34967-165">DNS A and AAAA (if you're using IPv6 addressing), or CNAME records, for automatic discovery of Skype for Business Server web services.</span></span> <span data-ttu-id="34967-166">Isso é para usar com mobilidade.</span><span class="sxs-lookup"><span data-stu-id="34967-166">This is for use with mobility.</span></span>
    
  - <span data-ttu-id="34967-167">DNS A e AAAA (se você estiver usando endereçamento IPv6) e registros SRV para a interface externa da borda de cada Skype para o servidor de borda do Business Server ou a carga de hardware balanceada VIP (HLB) na rede de perímetro.</span><span class="sxs-lookup"><span data-stu-id="34967-167">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for the Edge external interface of each Skype for Business Server Edge Server or hardware load balanced (HLB) VIP in the perimeter network.</span></span>
    
  - <span data-ttu-id="34967-168">Registros DNS A e AAAA (se você estiver usando endereçamento IPv6) e SRV para a interface externa do servidor de proxy reverso ou (VIP para um pool de servidores de proxy reverso), na rede de perímetro.</span><span class="sxs-lookup"><span data-stu-id="34967-168">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for the external interface of the Reverse proxy server or (VIP for a pool of Reverse proxy servers), in the perimeter network.</span></span>
    
  - <span data-ttu-id="34967-169">DNS A e AAAA (se você estiver usando endereçamento IPv6) e registros SRV para Skype para Business Server configuração automática do cliente (**opcional**).</span><span class="sxs-lookup"><span data-stu-id="34967-169">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for Skype for Business Server client autoconfiguration (**optional**).</span></span>
    
## <a name="automatic-configuration-without-split-brain-dns"></a><span data-ttu-id="34967-170">Configuração automática sem DNS de dupla personalidade</span><span class="sxs-lookup"><span data-stu-id="34967-170">Automatic configuration without split-brain DNS</span></span>
<span data-ttu-id="34967-171"><a name="NoSplitBrainDNS"> </a></span><span class="sxs-lookup"><span data-stu-id="34967-171"></span></span>

<span data-ttu-id="34967-172">Se você não usar Split-Brain DNS, interna configuração automática de clientes executando o Skype para negócios não funcionará a menos que você estiver usando uma das soluções que temos aqui.</span><span class="sxs-lookup"><span data-stu-id="34967-172">If you don't use split-brain DNS, internal automatic configuration of clients running Skype for Business won't work unless you're using one of the workarounds we have here.</span></span> <span data-ttu-id="34967-173">Por que não?</span><span class="sxs-lookup"><span data-stu-id="34967-173">Why not?</span></span> <span data-ttu-id="34967-174">Porque Skype para Business Server requer o URI do SIP do usuário corresponder ao domínio do pool de Front-End designado para configuração automática.</span><span class="sxs-lookup"><span data-stu-id="34967-174">Because Skype for Business Server requires the user's SIP URI to match the domain of the Front End pool designated for automatic configuration.</span></span> <span data-ttu-id="34967-175">Isso não mudou de versões anteriores do Lync Server.</span><span class="sxs-lookup"><span data-stu-id="34967-175">This hasn't changed from earlier versions of Lync Server.</span></span>
  
<span data-ttu-id="34967-176">Portanto, se você tiver dois domínios SIP em uso, você precisará desses registros SRV de DNS:</span><span class="sxs-lookup"><span data-stu-id="34967-176">So, if you have two SIP domains in use, you'd need these DNS SRV records:</span></span>
  
- <span data-ttu-id="34967-p113">_sipinternaltls._tcp.contoso.com. 86400 IN SRV 0 0 5061 pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-p113">_sipinternaltls._tcp.contoso.com. 86400 IN SRV 0 0 5061 pool01.contoso.com</span></span>
    
     <span data-ttu-id="34967-179">*Se um usuário entrar como bob@contoso.com, este registro funcionaria para configuração automática, como o domínio SIP do usuário corresponde ao domínio do pool de Front-End (contoso.com).*</span><span class="sxs-lookup"><span data-stu-id="34967-179">*If a user signs in as bob@contoso.com, this record would work for automatic configuration, as the user's SIP domain matches the domain of the Front End pool (contoso.com).*</span></span> 
    
- <span data-ttu-id="34967-180">_sipinternaltls._tcp.fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="34967-180">_sipinternaltls._tcp.fabrikam.com.</span></span> <span data-ttu-id="34967-181">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="34967-181">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span></span>
    
     <span data-ttu-id="34967-182">*Se um usuário entrar como alice@fabrikam.com, este registro funcionaria para configuração automática do segundo domínio, novamente, porque o domínio SIP coincide com o pool de Front-End para esse domínio.*</span><span class="sxs-lookup"><span data-stu-id="34967-182">*If a user signs in as alice@fabrikam.com, this record would work for automatic configuration of the second domain, again because the SIP domain matches the Front End pool for that domain.*</span></span> 
    
<span data-ttu-id="34967-183">Para aprofundar mais o exemplo, isso não funcionaria:</span><span class="sxs-lookup"><span data-stu-id="34967-183">To take the example further, this would not work:</span></span>
  
- <span data-ttu-id="34967-p115">_sipinternaltls._tcp.litwareinc.com. 86400 IN SRV 0 0 5061 pool01.fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="34967-p115">_sipinternaltls._tcp.litwareinc.com. 86400 IN SRV 0 0 5061 pool01.fabrikam.com</span></span>
    
     <span data-ttu-id="34967-186">*O logon de usuário tim@litwareinc.com não funcionará para a configuração automática, porque seu domínio SIP (litwareinc.com) não corresponde ao domínio do pool (fabrikam.com).*</span><span class="sxs-lookup"><span data-stu-id="34967-186">*A user signing in as tim@litwareinc.com won't work for automatic configuration, because his SIP domain (litwareinc.com) doesn't match the domain in the pool (fabrikam.com).*</span></span> 
    
<span data-ttu-id="34967-187">Portanto, agora que sabemos que tudo isso, se você precisar requisito automático para sua Skype para clientes corporativos sem Split-Brain DNS, você tem estas opções:</span><span class="sxs-lookup"><span data-stu-id="34967-187">So now that we know all that, if you need automatic requirement for your Skype for Business clients without split-brain DNS, you have these options:</span></span>
  
- <span data-ttu-id="34967-188">**Objetos de Política de Grupo**</span><span class="sxs-lookup"><span data-stu-id="34967-188">**Group Policy Objects**</span></span>
    
    <span data-ttu-id="34967-189">Você pode usar Objetos de Política de Grupo (GPOs) para popular os valores de servidor corretos.</span><span class="sxs-lookup"><span data-stu-id="34967-189">You can use Group Policy Objects (GPOs) to populate the correct server values.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="34967-p116">Essa opção não habilita a configuração automática, mas automatiza a configuração manual. Se essa abordagem for utilizada, os registros SRV associados à configuração automática não serão necessários.</span><span class="sxs-lookup"><span data-stu-id="34967-p116">This option doesn't enable automatic configuration, but it does automate manual configuration. If this approach is used, the SRV records associated with automatic configuration aren't required.</span></span> 
  
- <span data-ttu-id="34967-192">**Zona interna correspondente**</span><span class="sxs-lookup"><span data-stu-id="34967-192">**Matching internal zone**</span></span>
    
    <span data-ttu-id="34967-193">Você precisará criar uma zona em seu DNS interno que coincida com sua zona de DNS externa (por exemplo, contoso.com) e, em seguida, crie A DNS (e AAAA se você estiver usando endereçamento IPv6) registros que correspondem do Skype para pool de servidores de negócios usado para automático configuração.</span><span class="sxs-lookup"><span data-stu-id="34967-193">You'll need to create a zone in your internal DNS that matches your external DNS zone (for example, contoso.com), and then create DNS A (and AAAA if you're using IPv6 addressing) records that correspond to the Skype for Business Server pool used for automatic configuration.</span></span>
    
    <span data-ttu-id="34967-194">Por exemplo, se você tiver um usuário hospedado no pool01. contoso.NET, mas sinais em Skype para negócios como bob@contoso.com, criar uma zona DNS interna, chamada contoso.com e dentro dela você precisa criar um DNS A (e AAAA se acessos do endereçamento IPv6) registro pool01. contoso.com.</span><span class="sxs-lookup"><span data-stu-id="34967-194">For example, if you have a user homed on pool01.contoso.net, but signs into Skype for Business as bob@contoso.com, create an internal DNS zone called contoso.com, and inside it you need to create a DNS A (and AAAA if IPv6 addressing's being used) record for pool01.contoso.com.</span></span>
    
- <span data-ttu-id="34967-195">**Zona interna exata**</span><span class="sxs-lookup"><span data-stu-id="34967-195">**Pin-point internal zone**</span></span>
    
    <span data-ttu-id="34967-p117">Se criar uma zona inteira no DNS interno não for uma opção, você poderá criar zonas exatas (dedicadas) que correspondam aos registros SRV necessários para a configuração automática e popular estas zonas usando o dnscmd.exe. O dnscmd.exe é necessário porque a interface do usuário do DNS não é compatível com a criação de zonas exatas.</span><span class="sxs-lookup"><span data-stu-id="34967-p117">If creating an entire zone in your internal DNS isn't an option for you, you can create pin-point (dedicated) zones that correspond to the SRV records required for automatic configuration, and populate those zones using dnscmd.exe. Dnscmd.exe is required because the DNS user interface won't support the creation of pin-point zones.</span></span>
    
    <span data-ttu-id="34967-198">Por exemplo, se o domínio SIP for contoso.com, e você tiver um pool de Front-End chamado pool01 que contém dois servidores Front-End, você precisará seguintes zonas exatas e registros em seu DNS interno:</span><span class="sxs-lookup"><span data-stu-id="34967-198">For example, if your SIP domain is contoso.com, and you have a Front End pool called pool01 that contains two Front End Servers, you'll need the following pin-point zones and A records in your internal DNS:</span></span>
    
  ```
  dnscmd . /zoneadd _sipinternaltls._tcp.contoso.com. /dsprimary
  dnscmd . /recordadd _sipinternaltls._tcp.contoso.com. @ SRV 0 0 5061 pool01.contoso.com.
  dnscmd . /zoneadd pool01.contoso.com. /dsprimary
  dnscmd . /recordadd pool01.contoso.com. @ A 192.168.10.90
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  dnscmd . /recordadd pool01.contoso.com. @ A 192.168.10.91 
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  ```

    <span data-ttu-id="34967-p118">Você pode ter um segundo domínio SIP em seu ambiente. Nesse caso, você precisará das seguintes zonas exatas e registros A em seu DNS interno:</span><span class="sxs-lookup"><span data-stu-id="34967-p118">You may have a second SIP domain in your environment. In that case, you'll need the following pin-point zones and A records in your internal DNS:</span></span>
    
  ```
  dnscmd . /zoneadd _sipinternaltls._tcp.fabrikam.com. /dsprimary
  dnscmd . /recordadd _sipinternaltls._tcp.fabrikam.com. @ SRV 0 0 5061 pool01.fabrikam.com.
  dnscmd . /zoneadd pool01.fabrikam.com. /dsprimary
  dnscmd . /recordadd pool01.fabrikam.com. @ A 192.168.10.90
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  dnscmd . /recordadd pool01.fabrikam.com. @ A 192.168.10.91
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  ```

> [!NOTE]
> <span data-ttu-id="34967-201">Você verá o pool de Front-End que FQDN aparece duas vezes, mas com dois endereços IP diferentes.</span><span class="sxs-lookup"><span data-stu-id="34967-201">You'll see the Front End pool FQDN appears twice, but with two different IP addresses.</span></span> <span data-ttu-id="34967-202">Isso ocorre porque o balanceamento de carga DNS é usado.</span><span class="sxs-lookup"><span data-stu-id="34967-202">That's because DNS load balancing is used.</span></span> <span data-ttu-id="34967-203">Se HLB for usado, seria só haver uma única entrada de pool de Front-End.</span><span class="sxs-lookup"><span data-stu-id="34967-203">If HLB is used, there'd only be a single Front End pool entry.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="34967-204">Além disso, os valores FQDN do pool de Front-End alteram entre os exemplos de contoso.com e fabrikam.com, mas os endereços IP permanecem os mesmos.</span><span class="sxs-lookup"><span data-stu-id="34967-204">Also, the Front End pool FQDN values change between the contoso.com and fabrikam.com examples, but the IP addresses remain the same.</span></span> <span data-ttu-id="34967-205">Isso ocorre porque os usuários que estiver entrando de qualquer domínio SIP usarão o mesmo pool de Front-End para configuração automática.</span><span class="sxs-lookup"><span data-stu-id="34967-205">That's because users who're signing in from either SIP domain will be using the same Front End pool for automatic configuration.</span></span> 
  
## <a name="dns-disaster-recovery"></a><span data-ttu-id="34967-206">DNS disaster recovery</span><span class="sxs-lookup"><span data-stu-id="34967-206">DNS disaster recovery</span></span>
<span data-ttu-id="34967-207"><a name="DNSDR"> </a></span><span class="sxs-lookup"><span data-stu-id="34967-207"></span></span>

<span data-ttu-id="34967-208">Para configurar o DNS para redirecionar Skype para tráfego da web Business Server para sua sites de failover e a recuperação de desastres (DR), você precisará usar um provedor DNS que ofereça suporte a GeoDNS.</span><span class="sxs-lookup"><span data-stu-id="34967-208">To configure DNS to redirect Skype for Business Server web traffic to your disaster recover (DR) and failover sites, you need to use a DNS provider that supports GeoDNS.</span></span> <span data-ttu-id="34967-209">Você pode configurar seus registros DNS para oferecer suporte a recuperação de desastres, para que os recursos que utilizam serviços web continuam mesmo se um pool de Front-End inteiro cair.</span><span class="sxs-lookup"><span data-stu-id="34967-209">You can set up your DNS records to support disaster recover, so that features that use web services continue even if one entire Front End pool goes down.</span></span> <span data-ttu-id="34967-210">Esse recurso de DR suporta URLs simples de Descoberta Automática, de reunião e discado.</span><span class="sxs-lookup"><span data-stu-id="34967-210">This DR feature supports the Autodiscover, Meet and Dial-in simple URLs.</span></span>
  
<span data-ttu-id="34967-p122">Você define e configura registros adicionais de host de DNS A (AAAA, se estiver usando IPv6) para resolução de serviços da Web internos e externos em seu provedor GeoDNS. As informações a seguir supõem pools emparelhados e geograficamente dispersos, GeoDNS suportado por seu provedor \*\*\*\* com DNS round robin **ou** configurado para usar o Pool1 como primário e failover para o Pool2, em caso de perda de comunicações ou falha de energia.</span><span class="sxs-lookup"><span data-stu-id="34967-p122">You define and configure additional DNS host A (AAAA if using IPv6) records for internal and external resolution of web services at your GeoDNS provider. The following details assume paired pools, geographically dispersed, and that the GeoDNS supported by your provider **either** has round-robin DNS **or** is configured to use Pool1 as primary and fails over to Pool2 in the event of any communications loss or power failure.</span></span>
  
<span data-ttu-id="34967-213">Todos os registros DNS nesta tabela são exemplos.</span><span class="sxs-lookup"><span data-stu-id="34967-213">All the DNS records in this table are examples.</span></span>
  
|<span data-ttu-id="34967-214">**Registro GeoDNS**</span><span class="sxs-lookup"><span data-stu-id="34967-214">**GeoDNS record**</span></span>|<span data-ttu-id="34967-215">**Registros de Pool**</span><span class="sxs-lookup"><span data-stu-id="34967-215">**Pool records**</span></span>|<span data-ttu-id="34967-216">**Registros CNAME**</span><span class="sxs-lookup"><span data-stu-id="34967-216">**CNAME records**</span></span>|<span data-ttu-id="34967-217">**Registros DNS (selecione uma opção)**</span><span class="sxs-lookup"><span data-stu-id="34967-217">**DNS settings (select one option)**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="34967-218">Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-218">Meet-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-219">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-219">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-220">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-220">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-221">Alias Meet.contoso.com para Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-221">Meet.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-222">Alias Meet.contoso.com para Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-222">Meet.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-223">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="34967-223">Round Robin between pools</span></span>  <br/> <span data-ttu-id="34967-224">**OU**</span><span class="sxs-lookup"><span data-stu-id="34967-224">**OR**</span></span> <br/> <span data-ttu-id="34967-225">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="34967-225">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="34967-226">Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-226">Meet-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-227">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-227">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-228">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-228">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-229">Alias Meet.contoso.com para Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-229">Meet.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-230">Alias Meet.contoso.com para Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-230">Meet.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-231">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="34967-231">Round Robin between pools</span></span>  <br/> <span data-ttu-id="34967-232">**OU**</span><span class="sxs-lookup"><span data-stu-id="34967-232">**OR**</span></span> <br/> <span data-ttu-id="34967-233">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="34967-233">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="34967-234">Dialin-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-234">Dialin-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-235">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-235">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-236">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-236">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-237">Alias Dialin.contoso.com para Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-237">Dialin.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-238">Alias Dialin.contoso.com para Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-238">Dialin.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-239">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="34967-239">Round Robin between pools</span></span>  <br/> <span data-ttu-id="34967-240">**OU**</span><span class="sxs-lookup"><span data-stu-id="34967-240">**OR**</span></span> <br/> <span data-ttu-id="34967-241">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="34967-241">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="34967-242">Dialin-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-242">Dialin-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-243">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-243">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-244">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-244">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-245">Alias Dialin.contoso.com para Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-245">Dialin.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-246">Alias Dialin.contoso.com para Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-246">Dialin.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-247">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="34967-247">Round Robin between pools</span></span>  <br/> <span data-ttu-id="34967-248">**OU**</span><span class="sxs-lookup"><span data-stu-id="34967-248">**OR**</span></span> <br/> <span data-ttu-id="34967-249">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="34967-249">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="34967-250">Lyncdiscoverint-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-250">Lyncdiscoverint-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-251">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-251">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-252">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-252">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-253">Alias Lyncdiscoverinternal.contoso.com para Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-253">Lyncdiscoverinternal.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-254">Alias Lyncdiscoverinternal.contoso.com para Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-254">Lyncdiscoverinternal.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-255">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="34967-255">Round Robin between pools</span></span>  <br/> <span data-ttu-id="34967-256">**OU**</span><span class="sxs-lookup"><span data-stu-id="34967-256">**OR**</span></span> <br/> <span data-ttu-id="34967-257">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="34967-257">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="34967-258">Lyncdiscover-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-258">Lyncdiscover-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-259">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-259">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-260">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-260">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-261">Alias Lyncdiscover.contoso.com para Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-261">Lyncdiscover.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-262">Alias Lyncdiscover.contoso.com para Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-262">Lyncdiscover.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-263">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="34967-263">Round Robin between pools</span></span>  <br/> <span data-ttu-id="34967-264">**OU**</span><span class="sxs-lookup"><span data-stu-id="34967-264">**OR**</span></span> <br/> <span data-ttu-id="34967-265">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="34967-265">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="34967-266">Scheduler-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-266">Scheduler-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-267">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-267">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-268">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-268">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-269">Alias Scheduler.contoso.com para Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-269">Scheduler.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-270">Alias Scheduler.contoso.com para Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-270">Scheduler.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-271">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="34967-271">Round Robin between pools</span></span>  <br/> <span data-ttu-id="34967-272">**OU**</span><span class="sxs-lookup"><span data-stu-id="34967-272">**OR**</span></span> <br/> <span data-ttu-id="34967-273">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="34967-273">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="34967-274">Scheduler-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-274">Scheduler-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-275">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-275">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-276">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-276">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-277">Alias Scheduler.contoso.com para Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-277">Scheduler.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="34967-278">Alias Scheduler.contoso.com para Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-278">Scheduler.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-279">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="34967-279">Round Robin between pools</span></span>  <br/> <span data-ttu-id="34967-280">**OU**</span><span class="sxs-lookup"><span data-stu-id="34967-280">**OR**</span></span> <br/> <span data-ttu-id="34967-281">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="34967-281">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
   
## <a name="dns-load-balancing"></a><span data-ttu-id="34967-282">Balanceamento de carga DNS</span><span class="sxs-lookup"><span data-stu-id="34967-282">DNS load balancing</span></span>
<span data-ttu-id="34967-283"><a name="DNSLB"> </a></span><span class="sxs-lookup"><span data-stu-id="34967-283"></span></span>

<span data-ttu-id="34967-284">O balanceamento de carga do DNS normalmente é implantado no nível dos aplicativos.</span><span class="sxs-lookup"><span data-stu-id="34967-284">DNS load balancing is usually implemented at the application level.</span></span> <span data-ttu-id="34967-285">O aplicativo (por exemplo, um cliente executando o Skype para negócios), tenta se conectar a um servidor em um pool Estabelecendo conexão com um dos endereços IP retornados da consulta para o FQDN do pool de registrar o DNS A e AAAA (se for usado o endereçamento IPv6).</span><span class="sxs-lookup"><span data-stu-id="34967-285">The application (for example, a client running Skype for Business), tries to connect to a server in a pool by connecting to one of the IP addresses returned from the DNS A and AAAA (if IPv6 addressing is used) record query for the pool FQDN.</span></span>
  
<span data-ttu-id="34967-286">Por exemplo, se houver três servidores Front-End em um pool chamado pool01. contoso.com, o seguinte aconteceria:</span><span class="sxs-lookup"><span data-stu-id="34967-286">For example, if there are three Front End Servers in a pool named pool01.contoso.com, the following would happen:</span></span>
  
- <span data-ttu-id="34967-287">Clientes executando o Skype para negócios consultam DNS para pool01. contoso.com.</span><span class="sxs-lookup"><span data-stu-id="34967-287">Clients running Skype for Business query DNS for pool01.contoso.com.</span></span> <span data-ttu-id="34967-288">A consulta retorna três endereços de IP e os armazena em cache da seguinte maneira (em qualquer ordem):</span><span class="sxs-lookup"><span data-stu-id="34967-288">The query returns three IP addresses and caches them as follows (in some order):</span></span>
    
   |||
   |:-----|:-----|
   |<span data-ttu-id="34967-289">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-289">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-290">192.168.10.90</span><span class="sxs-lookup"><span data-stu-id="34967-290">192.168.10.90</span></span>  <br/> |
   |<span data-ttu-id="34967-291">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-291">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-292">192.168.10.91</span><span class="sxs-lookup"><span data-stu-id="34967-292">192.168.10.91</span></span>  <br/> |
   |<span data-ttu-id="34967-293">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="34967-293">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="34967-294">192.168.10.92</span><span class="sxs-lookup"><span data-stu-id="34967-294">192.168.10.92</span></span>  <br/> |
   
- <span data-ttu-id="34967-p125">O cliente tenta estabelecer uma conexão TCP com um dos endereços IP. Em caso de falha, o cliente tenta o próximo endereço IP em cache.</span><span class="sxs-lookup"><span data-stu-id="34967-p125">The client tries to establish a TCP connection to one of the IP addresses. If that fails, it'll try the next IP address it's cached from that list.</span></span>
    
- <span data-ttu-id="34967-297">Se a conexão TCP for bem -sucedida, o cliente negocia o TLS para se conectar ao Registrador Avançado primário em pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="34967-297">If the TCP connection succeeds, the client negotiates TLS to connect to the primary registrar on pool01.contoso.com.</span></span>
    
- <span data-ttu-id="34967-298">Se o cliente experimenta entradas tudo em cache sem uma conexão bem-sucedida, o usuário receberá uma notificação de que nenhum servidor executando o Skype para Business Server está disponível no momento.</span><span class="sxs-lookup"><span data-stu-id="34967-298">If the client tries all cached entries without a successful connection, the user receives a notification that no servers running Skype for Business Server are available at the moment.</span></span>
    
> [!NOTE]
> <span data-ttu-id="34967-p126">O balanceamento de carga com base em DNS é diferente do round robin de DNS (DNS RR), que normalmente faz referência ao balanceamento de carga confiando no DNS para fornecer uma ordem diferente de endereços IP dos servidores de seu pool. Normalmente, o DNS RR habilita a distribuição de carga, mas não habilita o failover. Por exemplo, se a conexão com um endereço IP retornado pela consulta DNS A (ou AAAA, se estiver usando o endereçamento IPv6) falhar, a conexão falha. Portanto, o round robin de DNS é menos confiável do que o balanceamento de carga com base em DNS. O round robin de DNS ainda pode ser usado em conjunto com o balanceamento de carga DNS.</span><span class="sxs-lookup"><span data-stu-id="34967-p126">DNS-based load balancing is different from DNS round robin (DNS RR), which typically refers to load balancing by relying on DNS to give a different order of IP addresses for the servers in your pool. Typically, DNS RR enables load distribution, but it won't allow you to enable failover. For example, if the connection to the one IP address returned by your DNS A (or AAAA in an IPv6 scenario) query fails, that connection will fail. That makes DNS RR less reliable than DNS-based load balancing. You can still use DNS RR in conjunction with DNS-based load balancing if you need to do that.</span></span> 
  
<span data-ttu-id="34967-304">O balanceamento de carga DNS é usado para:</span><span class="sxs-lookup"><span data-stu-id="34967-304">You use DNS load balancing to:</span></span>
  
- <span data-ttu-id="34967-305">Servidor-para-servidor SIP para os servidores de borda de balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="34967-305">Load balance server-to-server SIP to the Edge Servers.</span></span>
    
- <span data-ttu-id="34967-306">Balanceamento de carga de aplicativos de Serviços de Aplicativos de Comunicações Unificadas (UCAS), como o Atendedor Automático de Conferências, Grupo de Resposta e Estacionamento de Chamada.</span><span class="sxs-lookup"><span data-stu-id="34967-306">Load balance Unified Communication Application Services (UCAS) applications, such as Conferencing Auto Attendant, Response Group, and Call Park.</span></span>
    
- <span data-ttu-id="34967-307">Evitar novas conexões a aplicativos UCAS (também conhecido como drenagem).</span><span class="sxs-lookup"><span data-stu-id="34967-307">Prevent new connections to UCAS applications (also known as draining).</span></span>
    
- <span data-ttu-id="34967-308">O balanceamento de carga todo o tráfego cliente-para-servidor entre clientes e servidores de borda.</span><span class="sxs-lookup"><span data-stu-id="34967-308">Load balance all client-to-server traffic between clients and Edge Servers.</span></span>
    
<span data-ttu-id="34967-309">O balanceamento de carga DNS não pode ser usado para:</span><span class="sxs-lookup"><span data-stu-id="34967-309">You can't use DNS load balancing for:</span></span>
  
- <span data-ttu-id="34967-310">Tráfego web cliente-para-servidor para seus servidores Front-End ou um diretor.</span><span class="sxs-lookup"><span data-stu-id="34967-310">Client-to-server web traffic to your Front End Servers or a Director.</span></span>
    
<span data-ttu-id="34967-311">Para ir um pouco mais aprofundado na como um registro de SRV de DNS selecionados quando o texto com várias registros DNS forem retornados por uma consulta, o serviço de borda de acesso sempre seleciona o registro com a prioridade numérica mais baixa e, se desempate for necessária, o peso numérico mais alto.</span><span class="sxs-lookup"><span data-stu-id="34967-311">To go a little more in-depth on how a DNS SRV record's selected when mutiple DNS records are returned by a query, the Access Edge service always picks the record with the lowest numeric priority and, if a tie-breaker is needed, the highest numeric weight.</span></span> <span data-ttu-id="34967-312">Isso é consistente com [a documentação do Internet Engineering Task Force](https://www.ietf.org/rfc/rfc2782.txt).</span><span class="sxs-lookup"><span data-stu-id="34967-312">This is consistent with [Internet Engineering Task Force documentation](https://www.ietf.org/rfc/rfc2782.txt).</span></span>
  
<span data-ttu-id="34967-p128">Assim, por exemplo, se seu primeiro registro SRV de DNS tem um peso 20 e uma prioridade 40 e seu segundo registro SRV de DNS tem um peso 10 e uma prioridade 50, o primeiro registro vai ser escolhido, pois tem a prioridade menor de 40. A Prioridade é sempre considerada primeiro, e esse é o primeiro host de destino de um cliente. E se dois destinos tiverem a mesma prioridade?</span><span class="sxs-lookup"><span data-stu-id="34967-p128">So, for example, if your first DNS SRV record has a weight of 20 and a priority of 40, and your second DNS SRV record has a weight of 10 and a priority of 50, the first record's going to be chosen because it has the lower priority of 40. Priority always goes first, and that's the host that a client will target first. What if there are two targets with the same priority?</span></span> 
  
<span data-ttu-id="34967-p129">Nesse caso, o peso é considerado. Pesos maiores devem ter maior probabilidade, nessas circunstâncias, de serem escolhidos. Os administradores DNS devem usar peso 0 quando não houver nenhuma seleção de servidor para fazer. Na presença de registros contendo pesos maiores que 0, os registros com peso 0 devem ter uma chance muito pequena de serem selecionados.</span><span class="sxs-lookup"><span data-stu-id="34967-p129">In that case, weight comes into consideration. Larger weights should be given a high probability, in this circumstance, of being selected. DNS administrators should use weight 0 when there isn't any server selection to do. In the presence of records containing weights greater than 0, records with weight 0 have a very small chance of bring selected.</span></span>
  
<span data-ttu-id="34967-320">Então, o que acontece se vários registros SRV de DNS com prioridade e peso iguais forem retornados?</span><span class="sxs-lookup"><span data-stu-id="34967-320">So, then, what happens if multiple DNS SRV records with equal priority and weight as returned?</span></span> <span data-ttu-id="34967-321">Nessa situação, a borda de acesso a serviço escolherá o registro SRV que ele obteve do administrador do servidor DNS primeiro.</span><span class="sxs-lookup"><span data-stu-id="34967-321">In this situation the Access Edge service will choose the SRV record that it got from the DNS server first.</span></span>
  

