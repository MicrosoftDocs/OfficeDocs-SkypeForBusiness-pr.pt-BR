---
title: Planejamento DNS de servidor de borda avançado para o Skype for Business Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
audience: ITPro
ms.topic: conceptual
manager: serdars
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection:
- IT_Skype16
- Strat_SB_Hybrid
ms.custom: ''
ms.assetid: f3a5895f-f64f-44eb-9a5e-8d606ac1fc38
description: 'Resumo: examine os cenários das opções de implantação do Skype for Business Server. Se você deseja um único servidor ou prefere um pool de servidores com DNS ou HLB, este tópico deve ajudar.'
ms.openlocfilehash: 497126188b830a61804bedb44c5e50eedec11dcb
ms.sourcegitcommit: ab47ff88f51a96aaf8bc99a6303e114d41ca5c2f
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/20/2019
ms.locfileid: "34277185"
---
# <a name="advanced-edge-server-dns-planning-for-skype-for-business-server"></a><span data-ttu-id="6beaa-104">Planejamento DNS de servidor de borda avançado para o Skype for Business Server</span><span class="sxs-lookup"><span data-stu-id="6beaa-104">Advanced Edge Server DNS planning for Skype for Business Server</span></span>
 
<span data-ttu-id="6beaa-105">**Resumo:** Cenários de revisão para as opções de implantação do Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="6beaa-105">**Summary:** Review scenarios for Skype for Business Server deployment options.</span></span> <span data-ttu-id="6beaa-106">Se você deseja um único servidor ou prefere um pool de servidores com DNS ou HLB, este tópico deve ajudar.</span><span class="sxs-lookup"><span data-stu-id="6beaa-106">Whether you want a single server or prefer a server pool with DNS or HLB, this topic should help.</span></span>
  
<span data-ttu-id="6beaa-107">Quando se trata de planejamento DNS (Domain Name System) para o Skype for Business Server, há muitos fatores que podem ser executados na sua decisão.</span><span class="sxs-lookup"><span data-stu-id="6beaa-107">When it comes to Domain Name System (DNS) planning for Skype for Business Server, there are a lot of factors that may play into your decision.</span></span> <span data-ttu-id="6beaa-108">Se a estrutura de domínio de sua organização já estiver em vigor, pode ser só uma questão de analisar como continuar.</span><span class="sxs-lookup"><span data-stu-id="6beaa-108">If your organization's domain structure's already in place, this may be a matter of reviewing how you're going to proceed.</span></span> <span data-ttu-id="6beaa-109">Começaremos com os tópicos abaixo:</span><span class="sxs-lookup"><span data-stu-id="6beaa-109">We'll begin with the topics found below:</span></span>
  
- [<span data-ttu-id="6beaa-110">Walkthrough of Skype for Business clients locating services</span><span class="sxs-lookup"><span data-stu-id="6beaa-110">Walkthrough of Skype for Business clients locating services</span></span>](../../plan-your-deployment/network-requirements/advanced-edge-server-dns.md#WalkthroughOfSkype)
    
- [<span data-ttu-id="6beaa-111">Split-brain DNS</span><span class="sxs-lookup"><span data-stu-id="6beaa-111">Split-brain DNS</span></span>](../../plan-your-deployment/network-requirements/advanced-edge-server-dns.md#SplitBrainDNS)
    
- [<span data-ttu-id="6beaa-112">Automatic configuration without split-brain DNS</span><span class="sxs-lookup"><span data-stu-id="6beaa-112">Automatic configuration without split-brain DNS</span></span>](../../plan-your-deployment/network-requirements/advanced-edge-server-dns.md#NoSplitBrainDNS)
    
- [<span data-ttu-id="6beaa-113">DNS disaster recovery</span><span class="sxs-lookup"><span data-stu-id="6beaa-113">DNS disaster recovery</span></span>](../../plan-your-deployment/network-requirements/advanced-edge-server-dns.md#DNSDR)
    
- [<span data-ttu-id="6beaa-114">DNS load balancing</span><span class="sxs-lookup"><span data-stu-id="6beaa-114">DNS load balancing</span></span>](../../plan-your-deployment/network-requirements/advanced-edge-server-dns.md#DNSLB)
    
## <a name="walkthrough-of-skype-for-business-clients-locating-services"></a><span data-ttu-id="6beaa-115">Walkthrough of Skype for Business clients locating services</span><span class="sxs-lookup"><span data-stu-id="6beaa-115">Walkthrough of Skype for Business clients locating services</span></span>
<span data-ttu-id="6beaa-116"><a name="WalkthroughOfSkype"> </a></span><span class="sxs-lookup"><span data-stu-id="6beaa-116"></span></span>

<span data-ttu-id="6beaa-117">Os clientes do Skype for Business são semelhantes às versões anteriores dos clientes do Lync em como localizam e acessam serviços no Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="6beaa-117">Skype for Business clients are similar to previous versions of Lync clients in how they find and access services in Skype for Business Server.</span></span> <span data-ttu-id="6beaa-118">Esta seção detalha o processo de local do servidor.</span><span class="sxs-lookup"><span data-stu-id="6beaa-118">This section details the server location process.</span></span>
  
1. <span data-ttu-id="6beaa-119">lyncdiscoverinternal. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="6beaa-119">lyncdiscoverinternal.\<domain\></span></span>
    
     <span data-ttu-id="6beaa-120">*Um registro de host do serviço de Descoberta Automática nos serviços Web internos.*</span><span class="sxs-lookup"><span data-stu-id="6beaa-120">*This is an A host record for the Autodiscover service on the internal web services.*</span></span> 
    
2. <span data-ttu-id="6beaa-121">lyncdiscover. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="6beaa-121">lyncdiscover.\<domain\></span></span>
    
     <span data-ttu-id="6beaa-122">*Um registro de host do serviço de Descoberta Automática nos serviços Web externos.*</span><span class="sxs-lookup"><span data-stu-id="6beaa-122">*This is an A host record for the Autodiscover service on the external web services.*</span></span> 
    
3. <span data-ttu-id="6beaa-123">_sipinternaltls. _ TCP. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="6beaa-123">_sipinternaltls._tcp.\<domain\></span></span>
    
     <span data-ttu-id="6beaa-124">*Um registro SRV para conexões TLS internas.*</span><span class="sxs-lookup"><span data-stu-id="6beaa-124">*This is a SRV record for internal TLS connections.*</span></span> 
    
4. <span data-ttu-id="6beaa-125">_sip._tls. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="6beaa-125">_sip._tls.\<domain\></span></span>
    
     <span data-ttu-id="6beaa-126">*Um registro SRV para conexões TLS externas.*</span><span class="sxs-lookup"><span data-stu-id="6beaa-126">*This is a SRV record for external TLS connections.*</span></span> 
    
5. <span data-ttu-id="6beaa-127">sipinternal. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="6beaa-127">sipinternal.\<domain\></span></span>
    
     <span data-ttu-id="6beaa-128">*Esse é um registro de host para o pool ou o diretor de front-end, que é resolvível somente na rede interna.*</span><span class="sxs-lookup"><span data-stu-id="6beaa-128">*This is an A host record for the Front End pool or Director, resolvable only on the internal network.*</span></span> 
    
6. <span data-ttu-id="6beaa-129">SPI. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="6beaa-129">sip.\<domain\></span></span>
    
     <span data-ttu-id="6beaa-130">*Esse é um registro de host para o pool ou o diretor de front-end, que é resolvível somente na rede interna.*</span><span class="sxs-lookup"><span data-stu-id="6beaa-130">*This is an A host record for the Front End pool or Director, resolvable only on the internal network.*</span></span> 
    
7. <span data-ttu-id="6beaa-131">sipexternal. \<domínio\></span><span class="sxs-lookup"><span data-stu-id="6beaa-131">sipexternal.\<domain\></span></span>
    
     <span data-ttu-id="6beaa-132">*Esse é um registro de host para o serviço de borda de acesso, quando o cliente é externo.*</span><span class="sxs-lookup"><span data-stu-id="6beaa-132">*This is an A host record for the Access Edge service, when the client is external.*</span></span> 
    
<span data-ttu-id="6beaa-133">O serviço de Descoberta Automática é sempre considerado o método preferencial para local do serviço, e os outros estão métodos de fallback.</span><span class="sxs-lookup"><span data-stu-id="6beaa-133">The Autodiscover service is always favored as that's the preferred method for service location, and the others are fallback methods.</span></span>
  
> [!NOTE]
> <span data-ttu-id="6beaa-p105">Ao criar registros SRV, é importante lembrar que eles devem apontar para um DNS A (e AAAA, se você estiver usando endereçamento IPv6) no mesmo domínio em que o registro SRV do DNS for criado. Por exemplo, se o registro SRV estiver em contoso.com, o registro A (e AAAA) para o qual aponta não poderá estar em fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="6beaa-p105">When you're creating SRV records, it's important to remember that they need to point to a DNS A (and AAAA if you're using IPv6 addressing) in the same domain in which the DNS SRV record's being created. For example, if they SRV record's in contoso.com, the A (and AAAA) record it points to can't be in fabrikam.com.</span></span> 
  
<span data-ttu-id="6beaa-p106">Se você quiser, é possível definir seu dispositivo móvel para descoberta manual de serviços. Se for isso que você desejar fazer, cada usuário precisa definir as configurações de seus dispositivos móveis com os URIs completos, internos e externos, do serviço de Descoberta Automática, incluindo o protocolo e o caminho, da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="6beaa-p106">If you're inclined to do it, you can set your mobile device up for manual discovery of services. If that's what you're looking to do, each user needs to configure their mobile device settings with the full internal and external Autodiscover service URIs, including the protocol and path, as follows:</span></span>
  
- <span data-ttu-id="6beaa-138">Para acesso externo: https://\<ExtPoolFQDN\>/autodiscover/autodiscoverservice.svc/root</span><span class="sxs-lookup"><span data-stu-id="6beaa-138">For external access: https://\<ExtPoolFQDN\>/Autodiscover/autodiscoverservice.svc/Root</span></span>
    
- <span data-ttu-id="6beaa-139">Para acesso interno: https://\<IntPoolFQDN\>/autodiscover/autodiscover.svc/root</span><span class="sxs-lookup"><span data-stu-id="6beaa-139">For internal access: https://\<IntPoolFQDN\>/AutoDiscover/AutoDiscover.svc/Root</span></span>
    
<span data-ttu-id="6beaa-p107">Recomendamos que você use a descoberta automática em oposição à descoberta manual. Mas, se você estiver solucionando problemas ou fazendo testes, as configurações manuais podem ser muito úteis.</span><span class="sxs-lookup"><span data-stu-id="6beaa-p107">We do recommend you use automatic discovery as opposed to manual discovery. But if you're doing some troubleshooting or testing, manual settings can be very helpful.</span></span>
  
## <a name="split-brain-dns"></a><span data-ttu-id="6beaa-142">DNS de dupla personalidade</span><span class="sxs-lookup"><span data-stu-id="6beaa-142">Split-brain DNS</span></span>
<span data-ttu-id="6beaa-143"><a name="SplitBrainDNS"> </a></span><span class="sxs-lookup"><span data-stu-id="6beaa-143"></span></span>

<span data-ttu-id="6beaa-p108">Esta é uma configuração de DNS na qual você tem duas zonas DNS com o mesmo namespace. A primeira zona DNS lida com os pedidos internos, enquanto a segunda zona DNS lida com os pedidos externos.</span><span class="sxs-lookup"><span data-stu-id="6beaa-p108">This is a DNS configuration where you have two DNS zones with the same namespace. The first DNS zone handles internal requests, while the second DNS zone handles external requests.</span></span>
  
<span data-ttu-id="6beaa-p109">Por que uma empresa faria isso? Pode haver a necessidade de usar o mesmo namespace internamente e externamente, mas isso levaria a muitos SRV e registros A de DNS exclusivos para uma ou outra zona e, onde houver duplicação, os endereços IP associados a esses registros seriam exclusivo.</span><span class="sxs-lookup"><span data-stu-id="6beaa-p109">Why would a company do this? They may have a requirement to use the same namespace internally and externally, but of course this will lead to many DNS SRV and A records being unique to one zone or another, and where there is duplication, the IP addresses associated with these records would be unique.</span></span>
  
<span data-ttu-id="6beaa-148">Isso apresenta alguns desafios.</span><span class="sxs-lookup"><span data-stu-id="6beaa-148">This presents some challenges.</span></span> <span data-ttu-id="6beaa-149">O mais importante é que o DNS Split-Brain **não é compatível** com a mobilidade.</span><span class="sxs-lookup"><span data-stu-id="6beaa-149">The most important is that split-brain DNS is **not supported** for Mobility.</span></span> <span data-ttu-id="6beaa-150">Isso ocorre por causa dos registros de DNS LyncDiscover e LyncDiscoverInternal (LyncDiscover deve ser definido no servidor DNS externo, enquanto que LyncDiscoverInternal deve ser definido em seu servidor DNS interno).</span><span class="sxs-lookup"><span data-stu-id="6beaa-150">This is because of the LyncDiscover and LyncDiscoverInternal DNS records (LyncDiscover has to be defined on you external DNS server, while LyncDiscoverInternal has to be defined on your internal DNS server).</span></span>
  
<span data-ttu-id="6beaa-151">Listaremos os registros de DNS das zonas internas e externas aqui, mas você pode encontrar exemplos detalhados na seção requisitos de ambiente do servidor de borda.</span><span class="sxs-lookup"><span data-stu-id="6beaa-151">We'll list the DNS records for the internal and external zones here, but you can find detailed examples on the Edge Server environmental requirements section.</span></span>
  
### <a name="internal-dns"></a><span data-ttu-id="6beaa-152">DNS Interno</span><span class="sxs-lookup"><span data-stu-id="6beaa-152">Internal DNS</span></span>

- <span data-ttu-id="6beaa-153">Contém uma zona DNS chamada (por exemplo) contoso.com, para a qual é autoritativo.</span><span class="sxs-lookup"><span data-stu-id="6beaa-153">Contains a DNS zone called (for example) contoso.com, for which it's authoritative.</span></span>
    
- <span data-ttu-id="6beaa-154">Essa zona interna contoso.com contém:</span><span class="sxs-lookup"><span data-stu-id="6beaa-154">This internal contoso.com contains:</span></span>
    
  - <span data-ttu-id="6beaa-155">Registros DNS A e AAAA (se você estiver usando endereçamento IPv6) para o pool de front-end, o pool de directors ou o nome do pool de diretor e todos os servidores internos que executam o Skype for Business Server na rede da sua organização.</span><span class="sxs-lookup"><span data-stu-id="6beaa-155">DNS A and AAAA (if you're using IPv6 addressing) records for your Front End pool, Director pool or Director pool name, and all internal servers running Skype for Business Server in your organization's network.</span></span>
    
  - <span data-ttu-id="6beaa-156">Registros A e AAAA do DNS (se você estiver usando endereçamento IPv6) para a interface interna do seu Edge para cada servidor de borda do Skype for Business Server na sua rede de perímetro.</span><span class="sxs-lookup"><span data-stu-id="6beaa-156">DNS A and AAAA (if you're using IPv6 addressing) records for your Edge internal interface for each Skype for Business Server Edge Server in your perimeter network.</span></span>
    
  - <span data-ttu-id="6beaa-157">Registros DNS A e AAAA (se você estiver usando endereçamento IPv6) para a interface interna de cada servidor de proxy reverso na sua rede de perímetro (que é **opcional** para o gerenciamento de um proxy reverso).</span><span class="sxs-lookup"><span data-stu-id="6beaa-157">DNS A and AAAA (if you're using IPv6 addressing) records for the internal interface of each reverse proxy server in your perimeter network (which is **optional** for management of a reverse proxy).</span></span>
    
  - <span data-ttu-id="6beaa-158">DNS A e AAAA (se você estiver usando endereçamento IPv6) e Registros SRV para configuração automática interna do cliente do Skype for Business Server (que é **opcional** ).</span><span class="sxs-lookup"><span data-stu-id="6beaa-158">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for internal Skype for Business Server client autoconfiguration (which is **optional** ).</span></span>
    
  - <span data-ttu-id="6beaa-159">DNS A e AAAA (se você estiver usando endereçamento IPv6) ou registros CNAME para descoberta automática de serviços Web do Skype for Business Server (que é **opcional** ).</span><span class="sxs-lookup"><span data-stu-id="6beaa-159">DNS A and AAAA (if you're using IPv6 addressing) or CNAME records for automatic discovery of Skype for Business Server Web Services (which is **optional** ).</span></span>
    
- <span data-ttu-id="6beaa-160">Todas as interfaces de borda interna do Skype for Business Server na sua rede de perímetro usam essa zona DNS interna para a resolução de consultas para o contoso.com.</span><span class="sxs-lookup"><span data-stu-id="6beaa-160">All your Skype for Business Server internal Edge interfaces in your perimeter network use this internal DNS zone for resolving queries to contoso.com.</span></span>
    
- <span data-ttu-id="6beaa-161">Todos os servidores que executam o Skype for Business Server e clientes que executam o Skype for Business Server na rede corporativa, apontam para servidores DNS internos para a resolução de consultas para o contoso.com ou usam o arquivo host em cada servidor de borda e lista de A e AAAA (se você estiver usando Endereçamento IPv6) para o próximo servidor de salto (especificamente para o diretor de diretor ou diretor de diretor, VIP de pool de front-end ou servidor Standard Edition).</span><span class="sxs-lookup"><span data-stu-id="6beaa-161">All servers running Skype for Business Server, and clients running Skype for Business Server in the corporate network, point to internal DNS servers for resolving queries to contoso.com, or they use the Host file on each Edge Server and list A and AAAA (if you're using IPv6 addressing) records for the next hop server (specifically for the Director or Director pool VIP, Front End pool VIP, or Standard Edition server).</span></span>
    
### <a name="external-dns"></a><span data-ttu-id="6beaa-162">DNS Externo</span><span class="sxs-lookup"><span data-stu-id="6beaa-162">External DNS</span></span>

- <span data-ttu-id="6beaa-163">Contém uma zona DNS chamada (por exemplo) contoso.com, para a qual é autoritativo</span><span class="sxs-lookup"><span data-stu-id="6beaa-163">Contains a DNS zone called (for example) contoso.com, for which it's authoritative.</span></span>
    
- <span data-ttu-id="6beaa-164">Essa zona externa contoso.com contém:</span><span class="sxs-lookup"><span data-stu-id="6beaa-164">This external contoso.com contains:</span></span>
    
  - <span data-ttu-id="6beaa-165">DNS A e AAAA (se você estiver usando endereçamento IPv6) ou registros CNAME para descoberta automática dos serviços da Web do Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="6beaa-165">DNS A and AAAA (if you're using IPv6 addressing), or CNAME records, for automatic discovery of Skype for Business Server web services.</span></span> <span data-ttu-id="6beaa-166">Isso é para uso com mobilidade.</span><span class="sxs-lookup"><span data-stu-id="6beaa-166">This is for use with mobility.</span></span>
    
  - <span data-ttu-id="6beaa-167">DNS A e AAAA (se você estiver usando endereçamento IPv6) e Registros SRV para a interface externa Edge de cada servidor de borda do Skype for Business Server ou VIP de carga de hardware (HLB) balanceada na rede de perímetro.</span><span class="sxs-lookup"><span data-stu-id="6beaa-167">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for the Edge external interface of each Skype for Business Server Edge Server or hardware load balanced (HLB) VIP in the perimeter network.</span></span>
    
  - <span data-ttu-id="6beaa-168">DNS A e AAAA (se você estiver usando endereçamento IPv6) e Registros SRV para a interface externa do servidor proxy reverso ou (VIP para um pool de servidores proxy reverso), na rede de perímetro.</span><span class="sxs-lookup"><span data-stu-id="6beaa-168">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for the external interface of the Reverse proxy server or (VIP for a pool of Reverse proxy servers), in the perimeter network.</span></span>
    
  - <span data-ttu-id="6beaa-169">DNS A e AAAA (se você estiver usando endereçamento IPv6) e Registros SRV para a configuração automática do cliente do Skype for Business Server ( **opcional** ).</span><span class="sxs-lookup"><span data-stu-id="6beaa-169">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for Skype for Business Server client autoconfiguration ( **optional** ).</span></span>
    
## <a name="automatic-configuration-without-split-brain-dns"></a><span data-ttu-id="6beaa-170">Configuração automática sem DNS de dupla personalidade</span><span class="sxs-lookup"><span data-stu-id="6beaa-170">Automatic configuration without split-brain DNS</span></span>
<span data-ttu-id="6beaa-171"><a name="NoSplitBrainDNS"> </a></span><span class="sxs-lookup"><span data-stu-id="6beaa-171"></span></span>

<span data-ttu-id="6beaa-172">Se você não usar o DNS Split-Brain, a configuração interna automática de clientes que executam o Skype for Business não funcionará, a menos que você esteja usando uma das soluções alternativas aqui.</span><span class="sxs-lookup"><span data-stu-id="6beaa-172">If you don't use split-brain DNS, internal automatic configuration of clients running Skype for Business won't work unless you're using one of the workarounds we have here.</span></span> <span data-ttu-id="6beaa-173">Por que não?</span><span class="sxs-lookup"><span data-stu-id="6beaa-173">Why not?</span></span> <span data-ttu-id="6beaa-174">Como o Skype for Business Server exige que o URI SIP do usuário corresponda ao domínio do pool de front-end designado para configuração automática.</span><span class="sxs-lookup"><span data-stu-id="6beaa-174">Because Skype for Business Server requires the user's SIP URI to match the domain of the Front End pool designated for automatic configuration.</span></span> <span data-ttu-id="6beaa-175">Isso não mudou de versões anteriores do Lync Server.</span><span class="sxs-lookup"><span data-stu-id="6beaa-175">This hasn't changed from earlier versions of Lync Server.</span></span>
  
<span data-ttu-id="6beaa-176">Portanto, se você tiver dois domínios SIP em uso, você precisará desses registros SRV de DNS:</span><span class="sxs-lookup"><span data-stu-id="6beaa-176">So, if you have two SIP domains in use, you'd need these DNS SRV records:</span></span>
  
- <span data-ttu-id="6beaa-p113">_sipinternaltls._tcp.contoso.com. 86400 IN SRV 0 0 5061 pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-p113">_sipinternaltls._tcp.contoso.com. 86400 IN SRV 0 0 5061 pool01.contoso.com</span></span>
    
     <span data-ttu-id="6beaa-179">*Se um usuário entrar como bob@contoso.com, esse registro funcionaria para configuração automática, pois o domínio SIP do usuário corresponde ao domínio do pool de front-ends (contoso.com).*</span><span class="sxs-lookup"><span data-stu-id="6beaa-179">*If a user signs in as bob@contoso.com, this record would work for automatic configuration, as the user's SIP domain matches the domain of the Front End pool (contoso.com).*</span></span> 
    
- <span data-ttu-id="6beaa-180">_sipinternaltls._tcp.fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="6beaa-180">_sipinternaltls._tcp.fabrikam.com.</span></span> <span data-ttu-id="6beaa-181">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-181">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span></span>
    
     <span data-ttu-id="6beaa-182">*Se um usuário entrar como alice@fabrikam.com, esse registro funcionaria para a configuração automática do segundo domínio, novamente porque o domínio SIP corresponde ao pool de front-end desse domínio.*</span><span class="sxs-lookup"><span data-stu-id="6beaa-182">*If a user signs in as alice@fabrikam.com, this record would work for automatic configuration of the second domain, again because the SIP domain matches the Front End pool for that domain.*</span></span> 
    
<span data-ttu-id="6beaa-183">Para aprofundar mais o exemplo, isso não funcionaria:</span><span class="sxs-lookup"><span data-stu-id="6beaa-183">To take the example further, this would not work:</span></span>
  
- <span data-ttu-id="6beaa-p115">_sipinternaltls._tcp.litwareinc.com. 86400 IN SRV 0 0 5061 pool01.fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-p115">_sipinternaltls._tcp.litwareinc.com. 86400 IN SRV 0 0 5061 pool01.fabrikam.com</span></span>
    
     <span data-ttu-id="6beaa-186">*O logon de usuário tim@litwareinc.com não funcionará para a configuração automática, porque seu domínio SIP (litwareinc.com) não corresponde ao domínio do pool (fabrikam.com).*</span><span class="sxs-lookup"><span data-stu-id="6beaa-186">*A user signing in as tim@litwareinc.com won't work for automatic configuration, because his SIP domain (litwareinc.com) doesn't match the domain in the pool (fabrikam.com).*</span></span> 
    
<span data-ttu-id="6beaa-187">Agora que sabemos tudo isso, se você precisar de requisito automático para seus clientes do Skype for Business sem divisão-Brain DNS, terá estas opções:</span><span class="sxs-lookup"><span data-stu-id="6beaa-187">So now that we know all that, if you need automatic requirement for your Skype for Business clients without split-brain DNS, you have these options:</span></span>
  
- <span data-ttu-id="6beaa-188">**Objetos de Política de Grupo**</span><span class="sxs-lookup"><span data-stu-id="6beaa-188">**Group Policy Objects**</span></span>
    
    <span data-ttu-id="6beaa-189">Você pode usar Objetos de Política de Grupo (GPOs) para popular os valores de servidor corretos.</span><span class="sxs-lookup"><span data-stu-id="6beaa-189">You can use Group Policy Objects (GPOs) to populate the correct server values.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="6beaa-p116">Essa opção não habilita a configuração automática, mas automatiza a configuração manual. Se essa abordagem for utilizada, os registros SRV associados à configuração automática não serão necessários.</span><span class="sxs-lookup"><span data-stu-id="6beaa-p116">This option doesn't enable automatic configuration, but it does automate manual configuration. If this approach is used, the SRV records associated with automatic configuration aren't required.</span></span> 
  
- <span data-ttu-id="6beaa-192">**Zona interna correspondente**</span><span class="sxs-lookup"><span data-stu-id="6beaa-192">**Matching internal zone**</span></span>
    
    <span data-ttu-id="6beaa-193">Você precisará criar uma zona no seu DNS interno que corresponda à sua zona DNS externa (por exemplo, contoso.com) e, em seguida, criar registros DNS A (e AAAA se você estiver usando endereçamento IPv6) que correspondam ao pool do servidor do Skype for Business usado para automático configuração.</span><span class="sxs-lookup"><span data-stu-id="6beaa-193">You'll need to create a zone in your internal DNS that matches your external DNS zone (for example, contoso.com), and then create DNS A (and AAAA if you're using IPv6 addressing) records that correspond to the Skype for Business Server pool used for automatic configuration.</span></span>
    
    <span data-ttu-id="6beaa-194">Por exemplo, se você tiver um usuário hospedado no pool01.contoso.net, mas se inscrever no Skype for Business como bob@contoso.com, crie uma zona DNS interna chamada contoso.com e dentro dela você precisará criar um registro DNS A (e AAAA se o endereçamento IPv6 estiver sendo usado) para pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="6beaa-194">For example, if you have a user homed on pool01.contoso.net, but signs into Skype for Business as bob@contoso.com, create an internal DNS zone called contoso.com, and inside it you need to create a DNS A (and AAAA if IPv6 addressing's being used) record for pool01.contoso.com.</span></span>
    
- <span data-ttu-id="6beaa-195">**Zona interna exata**</span><span class="sxs-lookup"><span data-stu-id="6beaa-195">**Pin-point internal zone**</span></span>
    
    <span data-ttu-id="6beaa-p117">Se criar uma zona inteira no DNS interno não for uma opção, você poderá criar zonas exatas (dedicadas) que correspondam aos registros SRV necessários para a configuração automática e popular estas zonas usando o dnscmd.exe. O dnscmd.exe é necessário porque a interface do usuário do DNS não é compatível com a criação de zonas exatas.</span><span class="sxs-lookup"><span data-stu-id="6beaa-p117">If creating an entire zone in your internal DNS isn't an option for you, you can create pin-point (dedicated) zones that correspond to the SRV records required for automatic configuration, and populate those zones using dnscmd.exe. Dnscmd.exe is required because the DNS user interface won't support the creation of pin-point zones.</span></span>
    
    <span data-ttu-id="6beaa-198">Por exemplo, se o seu domínio SIP for contoso.com e você tiver um pool de front-end chamado pool01 que contém dois servidores front-end, você precisará das seguintes zonas de ponto de fixação e registros no seu DNS interno:</span><span class="sxs-lookup"><span data-stu-id="6beaa-198">For example, if your SIP domain is contoso.com, and you have a Front End pool called pool01 that contains two Front End Servers, you'll need the following pin-point zones and A records in your internal DNS:</span></span>
    
  ```
  dnscmd . /zoneadd _sipinternaltls._tcp.contoso.com. /dsprimary
  dnscmd . /recordadd _sipinternaltls._tcp.contoso.com. @ SRV 0 0 5061 pool01.contoso.com.
  dnscmd . /zoneadd pool01.contoso.com. /dsprimary
  dnscmd . /recordadd pool01.contoso.com. @ A 192.168.10.90
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  dnscmd . /recordadd pool01.contoso.com. @ A 192.168.10.91 
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  ```

    <span data-ttu-id="6beaa-p118">Você pode ter um segundo domínio SIP em seu ambiente. Nesse caso, você precisará das seguintes zonas exatas e registros A em seu DNS interno:</span><span class="sxs-lookup"><span data-stu-id="6beaa-p118">You may have a second SIP domain in your environment. In that case, you'll need the following pin-point zones and A records in your internal DNS:</span></span>
    
  ```
  dnscmd . /zoneadd _sipinternaltls._tcp.fabrikam.com. /dsprimary
  dnscmd . /recordadd _sipinternaltls._tcp.fabrikam.com. @ SRV 0 0 5061 pool01.fabrikam.com.
  dnscmd . /zoneadd pool01.fabrikam.com. /dsprimary
  dnscmd . /recordadd pool01.fabrikam.com. @ A 192.168.10.90
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  dnscmd . /recordadd pool01.fabrikam.com. @ A 192.168.10.91
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  ```

> [!NOTE]
> <span data-ttu-id="6beaa-201">Você verá que o FQDN do pool de front-end aparece duas vezes, mas com dois endereços IP diferentes.</span><span class="sxs-lookup"><span data-stu-id="6beaa-201">You'll see the Front End pool FQDN appears twice, but with two different IP addresses.</span></span> <span data-ttu-id="6beaa-202">Isso ocorre porque o balanceamento de carga DNS é usado.</span><span class="sxs-lookup"><span data-stu-id="6beaa-202">That's because DNS load balancing is used.</span></span> <span data-ttu-id="6beaa-203">Se HLB for usado, haverá apenas uma única entrada de pool de front-end.</span><span class="sxs-lookup"><span data-stu-id="6beaa-203">If HLB is used, there'd only be a single Front End pool entry.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="6beaa-204">Além disso, os valores de FQDN do pool de front-end são alterados entre os exemplos contoso.com e fabrikam.com, mas os endereços IP permanecem os mesmos.</span><span class="sxs-lookup"><span data-stu-id="6beaa-204">Also, the Front End pool FQDN values change between the contoso.com and fabrikam.com examples, but the IP addresses remain the same.</span></span> <span data-ttu-id="6beaa-205">Isso porque os usuários que estão entrando em um domínio SIP usarão o mesmo pool de front-end para configuração automática.</span><span class="sxs-lookup"><span data-stu-id="6beaa-205">That's because users who're signing in from either SIP domain will be using the same Front End pool for automatic configuration.</span></span> 
  
## <a name="dns-disaster-recovery"></a><span data-ttu-id="6beaa-206">DNS disaster recovery</span><span class="sxs-lookup"><span data-stu-id="6beaa-206">DNS disaster recovery</span></span>
<span data-ttu-id="6beaa-207"><a name="DNSDR"> </a></span><span class="sxs-lookup"><span data-stu-id="6beaa-207"></span></span>

<span data-ttu-id="6beaa-208">Para configurar o DNS para redirecionar o tráfego da Web do Skype for Business Server para os sites de recuperação de desastres (DR) e de failover, você precisa usar um provedor de DNS que ofereça suporte a GeoDNS.</span><span class="sxs-lookup"><span data-stu-id="6beaa-208">To configure DNS to redirect Skype for Business Server web traffic to your disaster recover (DR) and failover sites, you need to use a DNS provider that supports GeoDNS.</span></span> <span data-ttu-id="6beaa-209">Você pode configurar seus registros DNS para dar suporte à recuperação de desastres, para que os recursos que usam serviços Web continuem mesmo se um pool de front-end inteiro ficar inativo.</span><span class="sxs-lookup"><span data-stu-id="6beaa-209">You can set up your DNS records to support disaster recover, so that features that use web services continue even if one entire Front End pool goes down.</span></span> <span data-ttu-id="6beaa-210">Esse recurso de DR suporta URLs simples de Descoberta Automática, de reunião e discado.</span><span class="sxs-lookup"><span data-stu-id="6beaa-210">This DR feature supports the Autodiscover, Meet and Dial-in simple URLs.</span></span>
  
<span data-ttu-id="6beaa-p122">Você define e configura registros adicionais de host de DNS A (AAAA, se estiver usando IPv6) para resolução de serviços da Web internos e externos em seu provedor GeoDNS. As informações a seguir supõem pools emparelhados e geograficamente dispersos, GeoDNS suportado por seu provedor \*\*\*\* com DNS round robin **ou** configurado para usar o Pool1 como primário e failover para o Pool2, em caso de perda de comunicações ou falha de energia.</span><span class="sxs-lookup"><span data-stu-id="6beaa-p122">You define and configure additional DNS host A (AAAA if using IPv6) records for internal and external resolution of web services at your GeoDNS provider. The following details assume paired pools, geographically dispersed, and that the GeoDNS supported by your provider **either** has round-robin DNS **or** is configured to use Pool1 as primary and fails over to Pool2 in the event of any communications loss or power failure.</span></span>
  
<span data-ttu-id="6beaa-213">Todos os registros DNS nesta tabela são exemplos.</span><span class="sxs-lookup"><span data-stu-id="6beaa-213">All the DNS records in this table are examples.</span></span>
  
|<span data-ttu-id="6beaa-214">**Registro GeoDNS**</span><span class="sxs-lookup"><span data-stu-id="6beaa-214">**GeoDNS record**</span></span>|<span data-ttu-id="6beaa-215">**Registros de Pool**</span><span class="sxs-lookup"><span data-stu-id="6beaa-215">**Pool records**</span></span>|<span data-ttu-id="6beaa-216">**Registros CNAME**</span><span class="sxs-lookup"><span data-stu-id="6beaa-216">**CNAME records**</span></span>|<span data-ttu-id="6beaa-217">**Registros DNS (selecione uma opção)**</span><span class="sxs-lookup"><span data-stu-id="6beaa-217">**DNS settings (select one option)**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="6beaa-218">Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-218">Meet-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-219">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-219">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="6beaa-220">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-220">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-221">Meet.contoso.com para Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-221">Meet.contoso.com to Meet-int.geolb.contoso.com</span></span>  <br/>   <br/> |<span data-ttu-id="6beaa-222">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="6beaa-222">Round Robin between pools</span></span>  <br/> <span data-ttu-id="6beaa-223">**OU**</span><span class="sxs-lookup"><span data-stu-id="6beaa-223">**OR**</span></span> <br/> <span data-ttu-id="6beaa-224">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="6beaa-224">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="6beaa-225">Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-225">Meet-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-226">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-226">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="6beaa-227">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-227">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-228">Meet.contoso.com para Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-228">Meet.contoso.com to Meet-ext.geolb.contoso.com</span></span>  <br/>   <br/> |<span data-ttu-id="6beaa-229">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="6beaa-229">Round Robin between pools</span></span>  <br/> <span data-ttu-id="6beaa-230">**OU**</span><span class="sxs-lookup"><span data-stu-id="6beaa-230">**OR**</span></span> <br/> <span data-ttu-id="6beaa-231">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="6beaa-231">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="6beaa-232">Dialin-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-232">Dialin-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-233">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-233">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="6beaa-234">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-234">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-235">Meet.contoso.com para Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-235">Meet.contoso.com to Meet-int.geolb.contoso.com</span></span>   <br/>  <br/> |<span data-ttu-id="6beaa-236">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="6beaa-236">Round Robin between pools</span></span>  <br/> <span data-ttu-id="6beaa-237">**OU**</span><span class="sxs-lookup"><span data-stu-id="6beaa-237">**OR**</span></span> <br/> <span data-ttu-id="6beaa-238">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="6beaa-238">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="6beaa-239">Dialin-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-239">Dialin-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-240">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-240">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="6beaa-241">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-241">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-242">Meet.contoso.com para Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-242">Meet.contoso.com to Meet-ext.geolb.contoso.com</span></span>  <br/>  <br/> |<span data-ttu-id="6beaa-243">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="6beaa-243">Round Robin between pools</span></span>  <br/> <span data-ttu-id="6beaa-244">**OU**</span><span class="sxs-lookup"><span data-stu-id="6beaa-244">**OR**</span></span> <br/> <span data-ttu-id="6beaa-245">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="6beaa-245">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="6beaa-246">Lyncdiscoverint-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-246">Lyncdiscoverint-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-247">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-247">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="6beaa-248">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-248">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-249">Meet.contoso.com para Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-249">Meet.contoso.com to Meet-int.geolb.contoso.com</span></span>   <br/>   <br/> |<span data-ttu-id="6beaa-250">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="6beaa-250">Round Robin between pools</span></span>  <br/> <span data-ttu-id="6beaa-251">**OU**</span><span class="sxs-lookup"><span data-stu-id="6beaa-251">**OR**</span></span> <br/> <span data-ttu-id="6beaa-252">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="6beaa-252">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="6beaa-253">Lyncdiscover-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-253">Lyncdiscover-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-254">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-254">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="6beaa-255">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-255">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-256">Meet.contoso.com para Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-256">Meet.contoso.com to Meet-ext.geolb.contoso.com</span></span>  <br/>  <br/> |<span data-ttu-id="6beaa-257">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="6beaa-257">Round Robin between pools</span></span>  <br/> <span data-ttu-id="6beaa-258">**OU**</span><span class="sxs-lookup"><span data-stu-id="6beaa-258">**OR**</span></span> <br/> <span data-ttu-id="6beaa-259">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="6beaa-259">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="6beaa-260">Scheduler-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-260">Scheduler-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-261">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-261">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="6beaa-262">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-262">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-263">Meet.contoso.com para Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-263">Meet.contoso.com to Meet-int.geolb.contoso.com</span></span>   <br/>  <br/> |<span data-ttu-id="6beaa-264">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="6beaa-264">Round Robin between pools</span></span>  <br/> <span data-ttu-id="6beaa-265">**OU**</span><span class="sxs-lookup"><span data-stu-id="6beaa-265">**OR**</span></span> <br/> <span data-ttu-id="6beaa-266">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="6beaa-266">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="6beaa-267">Scheduler-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-267">Scheduler-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-268">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-268">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="6beaa-269">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-269">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-270">Meet.contoso.com para Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-270">Meet.contoso.com to Meet-ext.geolb.contoso.com</span></span>   <br/>  <br/> |<span data-ttu-id="6beaa-271">Round Robin entre pools</span><span class="sxs-lookup"><span data-stu-id="6beaa-271">Round Robin between pools</span></span>  <br/> <span data-ttu-id="6beaa-272">**OU**</span><span class="sxs-lookup"><span data-stu-id="6beaa-272">**OR**</span></span> <br/> <span data-ttu-id="6beaa-273">Use o primário, conecte-se ao secundário em caso de falha</span><span class="sxs-lookup"><span data-stu-id="6beaa-273">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
   
## <a name="dns-load-balancing"></a><span data-ttu-id="6beaa-274">Balanceamento de carga DNS</span><span class="sxs-lookup"><span data-stu-id="6beaa-274">DNS load balancing</span></span>
<span data-ttu-id="6beaa-275"><a name="DNSLB"> </a></span><span class="sxs-lookup"><span data-stu-id="6beaa-275"></span></span>

<span data-ttu-id="6beaa-276">O balanceamento de carga do DNS normalmente é implantado no nível dos aplicativos.</span><span class="sxs-lookup"><span data-stu-id="6beaa-276">DNS load balancing is usually implemented at the application level.</span></span> <span data-ttu-id="6beaa-277">O aplicativo (por exemplo, um cliente que executa o Skype for Business), tenta se conectar a um servidor em um pool conectando-se a um dos endereços IP retornados da consulta de registro DNS A e AAAA (se o endereçamento IPv6 for usado) para o FQDN do pool.</span><span class="sxs-lookup"><span data-stu-id="6beaa-277">The application (for example, a client running Skype for Business), tries to connect to a server in a pool by connecting to one of the IP addresses returned from the DNS A and AAAA (if IPv6 addressing is used) record query for the pool FQDN.</span></span>
  
<span data-ttu-id="6beaa-278">Por exemplo, se houver três servidores front-end em um pool chamado pool01.contoso.com, acontecerá o seguinte:</span><span class="sxs-lookup"><span data-stu-id="6beaa-278">For example, if there are three Front End Servers in a pool named pool01.contoso.com, the following would happen:</span></span>
  
- <span data-ttu-id="6beaa-279">Clientes que executam o Skype for Business Query DNS para pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="6beaa-279">Clients running Skype for Business query DNS for pool01.contoso.com.</span></span> <span data-ttu-id="6beaa-280">A consulta retorna três endereços de IP e os armazena em cache da seguinte maneira (em qualquer ordem):</span><span class="sxs-lookup"><span data-stu-id="6beaa-280">The query returns three IP addresses and caches them as follows (in some order):</span></span>
    
   |||
   |:-----|:-----|
   |<span data-ttu-id="6beaa-281">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-281">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-282">192.168.10.90</span><span class="sxs-lookup"><span data-stu-id="6beaa-282">192.168.10.90</span></span>  <br/> |
   |<span data-ttu-id="6beaa-283">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-283">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-284">192.168.10.91</span><span class="sxs-lookup"><span data-stu-id="6beaa-284">192.168.10.91</span></span>  <br/> |
   |<span data-ttu-id="6beaa-285">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6beaa-285">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="6beaa-286">192.168.10.92</span><span class="sxs-lookup"><span data-stu-id="6beaa-286">192.168.10.92</span></span>  <br/> |
   
- <span data-ttu-id="6beaa-p125">O cliente tenta estabelecer uma conexão TCP com um dos endereços IP. Em caso de falha, o cliente tenta o próximo endereço IP em cache.</span><span class="sxs-lookup"><span data-stu-id="6beaa-p125">The client tries to establish a TCP connection to one of the IP addresses. If that fails, it'll try the next IP address it's cached from that list.</span></span>
    
- <span data-ttu-id="6beaa-289">Se a conexão TCP for bem -sucedida, o cliente negocia o TLS para se conectar ao Registrador Avançado primário em pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="6beaa-289">If the TCP connection succeeds, the client negotiates TLS to connect to the primary registrar on pool01.contoso.com.</span></span>
    
- <span data-ttu-id="6beaa-290">Se o cliente tentar todas as entradas armazenadas em cache sem uma conexão bem-sucedida, o usuário receberá uma notificação de que nenhum servidor executando o Skype for Business Server está disponível no momento.</span><span class="sxs-lookup"><span data-stu-id="6beaa-290">If the client tries all cached entries without a successful connection, the user receives a notification that no servers running Skype for Business Server are available at the moment.</span></span>
    
> [!NOTE]
> <span data-ttu-id="6beaa-p126">O balanceamento de carga com base em DNS é diferente do round robin de DNS (DNS RR), que normalmente faz referência ao balanceamento de carga confiando no DNS para fornecer uma ordem diferente de endereços IP dos servidores de seu pool. Normalmente, o DNS RR habilita a distribuição de carga, mas não habilita o failover. Por exemplo, se a conexão com um endereço IP retornado pela consulta DNS A (ou AAAA, se estiver usando o endereçamento IPv6) falhar, a conexão falha. Portanto, o round robin de DNS é menos confiável do que o balanceamento de carga com base em DNS. O round robin de DNS ainda pode ser usado em conjunto com o balanceamento de carga DNS.</span><span class="sxs-lookup"><span data-stu-id="6beaa-p126">DNS-based load balancing is different from DNS round robin (DNS RR), which typically refers to load balancing by relying on DNS to give a different order of IP addresses for the servers in your pool. Typically, DNS RR enables load distribution, but it won't allow you to enable failover. For example, if the connection to the one IP address returned by your DNS A (or AAAA in an IPv6 scenario) query fails, that connection will fail. That makes DNS RR less reliable than DNS-based load balancing. You can still use DNS RR in conjunction with DNS-based load balancing if you need to do that.</span></span> 
  
<span data-ttu-id="6beaa-296">O balanceamento de carga DNS é usado para:</span><span class="sxs-lookup"><span data-stu-id="6beaa-296">You use DNS load balancing to:</span></span>
  
- <span data-ttu-id="6beaa-297">Balancear a carga do servidor para o servidor SIP para os servidores de borda.</span><span class="sxs-lookup"><span data-stu-id="6beaa-297">Load balance server-to-server SIP to the Edge Servers.</span></span>
    
- <span data-ttu-id="6beaa-298">Balanceamento de carga de aplicativos de Serviços de Aplicativos de Comunicações Unificadas (UCAS), como o Atendedor Automático de Conferências, Grupo de Resposta e Estacionamento de Chamada.</span><span class="sxs-lookup"><span data-stu-id="6beaa-298">Load balance Unified Communication Application Services (UCAS) applications, such as Conferencing Auto Attendant, Response Group, and Call Park.</span></span>
    
- <span data-ttu-id="6beaa-299">Evitar novas conexões a aplicativos UCAS (também conhecido como drenagem).</span><span class="sxs-lookup"><span data-stu-id="6beaa-299">Prevent new connections to UCAS applications (also known as draining).</span></span>
    
- <span data-ttu-id="6beaa-300">Balanceamento de carga todo o tráfego de cliente para servidor entre clientes e servidores de borda.</span><span class="sxs-lookup"><span data-stu-id="6beaa-300">Load balance all client-to-server traffic between clients and Edge Servers.</span></span>
    
<span data-ttu-id="6beaa-301">O balanceamento de carga DNS não pode ser usado para:</span><span class="sxs-lookup"><span data-stu-id="6beaa-301">You can't use DNS load balancing for:</span></span>
  
- <span data-ttu-id="6beaa-302">Tráfego da Web de cliente para servidor para seus servidores front-end ou director.</span><span class="sxs-lookup"><span data-stu-id="6beaa-302">Client-to-server web traffic to your Front End Servers or a Director.</span></span>
    
<span data-ttu-id="6beaa-303">Para ter um pouco mais de detalhes sobre como um registro SRV DNS é selecionado quando registros DNS mutiple são retornados por uma consulta, o serviço de borda de acesso sempre escolhe o registro com a prioridade numérica mais baixa e, se for necessário um disjuntor, a maior espessura numérica.</span><span class="sxs-lookup"><span data-stu-id="6beaa-303">To go a little more in-depth on how a DNS SRV record's selected when mutiple DNS records are returned by a query, the Access Edge service always picks the record with the lowest numeric priority and, if a tie-breaker is needed, the highest numeric weight.</span></span> <span data-ttu-id="6beaa-304">Isso é consistente com a [documentação da Internet Engineering Task Force](https://www.ietf.org/rfc/rfc2782.txt).</span><span class="sxs-lookup"><span data-stu-id="6beaa-304">This is consistent with [Internet Engineering Task Force documentation](https://www.ietf.org/rfc/rfc2782.txt).</span></span>
  
<span data-ttu-id="6beaa-p128">Assim, por exemplo, se seu primeiro registro SRV de DNS tem um peso 20 e uma prioridade 40 e seu segundo registro SRV de DNS tem um peso 10 e uma prioridade 50, o primeiro registro vai ser escolhido, pois tem a prioridade menor de 40. A Prioridade é sempre considerada primeiro, e esse é o primeiro host de destino de um cliente. E se dois destinos tiverem a mesma prioridade?</span><span class="sxs-lookup"><span data-stu-id="6beaa-p128">So, for example, if your first DNS SRV record has a weight of 20 and a priority of 40, and your second DNS SRV record has a weight of 10 and a priority of 50, the first record's going to be chosen because it has the lower priority of 40. Priority always goes first, and that's the host that a client will target first. What if there are two targets with the same priority?</span></span> 
  
<span data-ttu-id="6beaa-p129">Nesse caso, o peso é considerado. Pesos maiores devem ter maior probabilidade, nessas circunstâncias, de serem escolhidos. Os administradores DNS devem usar peso 0 quando não houver nenhuma seleção de servidor para fazer. Na presença de registros contendo pesos maiores que 0, os registros com peso 0 devem ter uma chance muito pequena de serem selecionados.</span><span class="sxs-lookup"><span data-stu-id="6beaa-p129">In that case, weight comes into consideration. Larger weights should be given a high probability, in this circumstance, of being selected. DNS administrators should use weight 0 when there isn't any server selection to do. In the presence of records containing weights greater than 0, records with weight 0 have a very small chance of bring selected.</span></span>
  
<span data-ttu-id="6beaa-312">Então, o que acontece se vários registros SRV de DNS com prioridade e peso iguais forem retornados?</span><span class="sxs-lookup"><span data-stu-id="6beaa-312">So, then, what happens if multiple DNS SRV records with equal priority and weight as returned?</span></span> <span data-ttu-id="6beaa-313">Nessa situação, o serviço de borda de acesso escolherá primeiro o registro SRV que ele recebeu do servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="6beaa-313">In this situation the Access Edge service will choose the SRV record that it got from the DNS server first.</span></span>
  

